"0","# Load libraries and set theme to theme_minimal() -------------------------"
"0","library(tidyverse)"
"2","[30m-- [1mAttaching packages[22m --------------------------------------- tidyverse 1.3.0 --[39m
"
"2","[30m[32mv[30m [34mggplot2[30m 3.3.0     [32mv[30m [34mpurrr  [30m 0.3.3
[32mv[30m [34mtibble [30m 2.1.3     [32mv[30m [34mdplyr  [30m 0.8.4
[32mv[30m [34mtidyr  [30m 1.0.2     [32mv[30m [34mstringr[30m 1.4.0
[32mv[30m [34mreadr  [30m 1.3.1     [32mv[30m [34mforcats[30m 0.4.0[39m
"
"2","[30m-- [1mConflicts[22m ------------------------------------------ tidyverse_conflicts() --
[31mx[30m [34mdplyr[30m::[32mfilter()[30m masks [34mstats[30m::filter()
[31mx[30m [34mdplyr[30m::[32mlag()[30m    masks [34mstats[30m::lag()[39m
"
"0","library(imfr)"
"0","library(lubridate)"
"2","
Vedhæfter pakke: ‘lubridate’

"
"2","Det følgende objekt er maskeret fra ‘package:base’:

    date

"
"0","library(extrafont)"
"2","Registering fonts with R
"
"0","theme_set(theme_minimal())"
"0",""
"0","# Import data from IMF Primary Commodity Price System ---------------------"
"0","ldf <- list()"
"0",""
"0","for (i in c(""PTIN"", ""PCOPP"", ""PALUM"", ""PNICK"", ""PZINC"")){"
"0","df <- imf_data("
"0","  database_id = ""PCPS"","
"0","  indicator = i,"
"0","  country =  ""W00"","
"0","  start = 1990,"
"0","  end = current_year(),"
"0","  freq = ""M"","
"0","  return_raw = TRUE"
"0",")"
"0",""
"0","ldf[[i]] <- df$CompactData$DataSet$Series %>% "
"0","  filter(`@FREQ` == ""M"", `@COMMODITY` ==  i, `@UNIT_MEASURE` == ""USD"") %>% "
"0","  unnest(Obs)"
"0","}"
"1","  |                                                                                                            "
"1","  |                                                                                                      |   0%"
"1","  |                                                                                                            "
"1","  |===                                                                                                   |   3%"
"1","  |                                                                                                            "
"1","  |============================================================                                          |  58%"
"1","  |                                                                                                            "
"1","  |======================================================================                                |  69%"
"1","  |                                                                                                            "
"1","  |===========================================================================                           |  74%"
"1","  |                                                                                                            "
"1","  |===============================================================================================       |  93%"
"1","  |                                                                                                            "
"1","  |======================================================================================================| 100%"
"1","
"
"1","  |                                                                                                            "
"1","  |                                                                                                      |   0%"
"1","  |                                                                                                            "
"1","  |====                                                                                                  |   4%"
"1","  |                                                                                                            "
"1","  |=============================================================                                         |  59%"
"1","  |                                                                                                            "
"1","  |======================================================================================================| 100%"
"1","
"
"1","  |                                                                                                            "
"1","  |                                                                                                      |   0%"
"1","  |                                                                                                            "
"1","  |====                                                                                                  |   4%"
"1","  |                                                                                                            "
"1","  |==============================================================                                        |  60%"
"1","  |                                                                                                            "
"1","  |======================================================================================================| 100%"
"1","
"
"1","  |                                                                                                            "
"1","  |                                                                                                      |   0%"
"1","  |                                                                                                            "
"1","  |====                                                                                                  |   4%"
"1","  |                                                                                                            "
"1","  |==============================================================                                        |  60%"
"1","  |                                                                                                            "
"1","  |======================================================================================================| 100%"
"1","
"
"1","  |                                                                                                            "
"1","  |                                                                                                      |   0%"
"1","  |                                                                                                            "
"1","  |====                                                                                                  |   4%"
"1","  |                                                                                                            "
"1","  |=============================================================                                         |  60%"
"1","  |                                                                                                            "
"1","  |======================================================================================================| 100%"
"1","
"
"0","PCPS <- as.data.frame(do.call(""rbind"", ldf))"
"0",""
"0","# Import data from IMF International Financial Statistics -----------------"
"0","IFS <- imf_data(database_id = 'IFS', indicator = 'ENDA_XDC_USD_RATE',"
"0","                    country = c('DK'), freq = 'M',"
"0","                    start = 1990, end = current_year())"
"1","  |                                                                                                            "
"1","  |                                                                                                      |   0%"
"1","  |                                                                                                            "
"1","  |========================                                                                              |  24%"
"1","  |                                                                                                            "
"1","  |======================================================================================================| 100%"
"1","
"
"0","# Data cleaning and wrangling ---------------------------------------------"
"0","coin_data <- PCPS %>% "
"0","  inner_join(IFS, by = c(""@TIME_PERIOD"" = ""year_month"")) %>% "
"0","  mutate(USD_ton = as.numeric(`@OBS_VALUE`),"
"0","         year_month = ymd(`@TIME_PERIOD`, truncated = 1),"
"0","         DKK_gram = USD_ton*ENDA_XDC_USD_RATE/1000000) %>% "
"0","  select(commodity = `@COMMODITY`,"
"0","         year_month,"
"0","         DKK_gram) %>% "
"0","  pivot_wider(names_from = commodity, values_from = DKK_gram) %>% "
"0","  mutate(price_25ore = (2.8*0.97*PCOPP+2.8*0.005*PTIN+2.8*0.025*PZINC)*100, # 2.8g, copper 97%, tin 0.5%, zinc 2,5%"
"0","         price_50ore = (4.3*0.97*PCOPP+4.3*0.005*PTIN+4.3*0.025*PZINC)*100, # 4.3g, copper 97%, tin 0.5%, zinc 2,5%"
"0","         price_1kr = (3.6*0.75*PCOPP+3.6*0.25*PNICK)*100, # 3.6g, copper 75%, nickel 25%"
"0","         price_2kr = (5.9*0.75*PCOPP+5.9*0.25*PNICK)*100, # 5.9g, copper 75%, nickel 25%"
"0","         price_5kr = (9.2*0.75*PCOPP+9.2*0.25*PNICK)*100, # 9.2g, copper 75%, nickel 25%"
"0","         price_10kr = (7*0.92*PCOPP+7*0.02*PNICK+7*0.06*PALUM)*100, # 7g, copper 92%, nickel 2%, aluminium 6%"
"0","         price_20kr = (9.3*0.92*PCOPP+9.3*0.02*PNICK+9.3*0.06*PALUM)*100, # 9.3g, copper 92%, nickel 2%, aluminium 6%"
"0","         pct_25ore = price_25ore/25,"
"0","         pct_50ore = price_50ore/50,"
"0","         pct_1kr = price_1kr/100,"
"0","         pct_2kr = price_2kr/200,"
"0","         pct_5kr = price_5kr/500,"
"0","         pct_10kr = price_10kr/1000,"
"0","         pct_20kr = price_20kr/2000) %>% "
"0","  select(-c(PTIN:PZINC)) %>% "
"0","  pivot_longer(-year_month) %>% "
"0","  separate(name, c(""measure"", ""coin"")) %>%"
"0","  mutate(coin = recode_factor(coin, "
"0","                              ""25ore"" = ""25-Ã¸re"","
"0","                              ""50ore"" = ""50-Ã¸re"","
"0","                              ""1kr"" = ""1-krone"","
"0","                              ""2kr"" = ""2-krone"","
"0","                              ""5kr"" = ""5-krone"","
"0","                              ""10kr"" = ""10-krone"","
"0","                              ""20kr"" = ""20-krone"")"
"0","  )"
